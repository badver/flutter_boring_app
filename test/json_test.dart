import 'package:flutter_boring_app/src/json_parsing.dart';
import 'package:test/test.dart';

void main() {
  test("parses topstories.json", () {
    const jsonString = """
    [18688260,18687774,18688307,18687802,18673605,18680223,18686720,18681745,18687753,18686205,18683991,18677676,18682580,18684124,18685296,18687184,18688176,18680043,18679125,18686333,18683230,18681676,18686489,18679200,18679636,18684666,18683264,18675280,18687498,18683602,18680160,18685327,18680052,18681516,18676042,18683923,18680206,18682627,18687050,18682285,18684384,18679064,18678699,18688004,18682159,18687021,18681847,18683875,18687372,18671609,18681447,18684047,18687213,18683088,18665812,18671512,18678382,18682326,18685891,18680908,18665924,18681772,18685751,18671223,18671993,18686584,18686936,18685601,18683362,18681245,18682946,18686787,18682579,18682925,18686255,18686654,18685465,18678192,18675776,18682281,18680617,18667747,18678929,18678314,18679593,18668052,18670793,18679182,18672951,18684709,18673928,18682678,18686287,18684469,18673968,18666639,18676986,18677953,18683978,18669720,18670963,18680262,18667750,18679957,18679715,18682707,18677735,18670786,18667423,18674158,18674365,18678932,18674581,18674892,18673541,18682527,18677068,18671982,18679430,18683253,18686041,18678853,18677972,18681517,18674188,18677406,18681409,18680337,18666913,18674832,18671403,18681930,18683267,18667660,18670487,18680701,18671101,18678803,18677689,18679583,18677855,18671581,18671721,18687489,18674107,18684273,18684518,18674702,18666159,18674238,18681744,18682331,18677508,18685060,18668536,18668493,18672488,18668777,18686785,18674925,18674940,18672318,18686624,18684710,18677461,18677715,18670998,18677025,18686519,18667344,18671417,18676300,18666146,18674327,18683595,18673254,18668663,18675919,18678852,18665033,18666574,18666328,18669142,18672288,18665475,18685985,18686998,18686504,18675371,18685918,18667160,18671009,18668669,18671390,18674885,18683140,18664664,18675375,18677388,18671747,18665048,18667179,18675397,18680104,18675861,18666392,18682122,18669464,18673940,18675186,18676219,18666827,18673538,18676649,18670723,18677726,18675850,18684783,18665595,18676706,18675244,18677335,18673482,18675525,18671555,18684780,18671539,18666583,18666256,18675059,18677733,18684257,18675493,18673512,18678999,18677200,18685321,18668638,18664643,18683073,18673373,18675229,18668187,18677739,18683044,18670994,18684762,18667281,18664433,18665809,18684501,18684475,18681841,18665897,18679382,18671464,18684046,18677149,18674131,18674001,18673226,18678509,18673737,18675894,18673202,18679681,18664715,18676813,18675664,18673315,18673517,18682648,18673392,18666245,18676863,18676835,18669553,18676763,18673175,18676302,18672159,18673872,18681274,18675453,18676851,18666567,18675000,18670796,18677713,18677636,18667679,18670499,18675531,18673473,18676920,18667396,18669816,18676426,18678782,18673520,18678543,18675320,18668226,18670896,18675072,18666762,18667965,18667997,18670799,18679433,18677935,18677774,18677711,18675618,18675413,18668645,18676049,18679744,18664650,18677087,18673752,18673716,18676728,18673684,18676566,18678573,18668061,18674171,18676116,18675912,18669572,18671991,18671893,18665790,18672678,18674380,18666820,18673833,18671916,18673474,18666346,18677803,18669319,18672239,18672145,18676456,18666620,18684525,18676160,18671842,18675498,18672226,18664567,18675077,18667989,18674999,18667209,18670031,18674133,18668383,18668451,18669737,18672276,18672257,18669681,18677654,18665908,18671779,18665604,18679767,18668601,18670971,18668051,18681234,18667095,18686190,18666903,18666895,18675128,18676797,18668276,18668221,18667304,18673229,18674780,18670634,18668530,18672085,18673947,18673212,18664882,18671181,18666001,18665351,18671245,18668649,18685861,18674296,18672539]
    """;
    expect(parseTopStories(jsonString).first, 18688260);
  });

  test("parses item.json", () {
    const jsonString = """
    {"by":"dhouston","descendants":71,"id":8863,"kids":[9224,8952,8917,8884,8887,8869,8940,8908,8958,9005,8873,9671,9067,9055,8865,8881,8872,8955,10403,8903,8928,9125,8998,8901,8902,8907,8894,8870,8878,8980,8934,8943,8876],"score":104,"time":1175714200,"title":"My YC app: Dropbox - Throw away your USB drive","type":"story","url":"http://www.getdropbox.com/u/2/screencast.html"}
    """;
    expect(parseArticle(jsonString).by, "dhouston");
  });
}
